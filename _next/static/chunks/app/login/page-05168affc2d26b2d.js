(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{6249:function(){},7201:function(e,t,r){Promise.resolve().then(r.bind(r,6374))},6374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var n=r(1595),o=r(8582),i=r(156),a=r(3996),c=r(3146),s=r(3448),u=r(6387),l=r(1327),d=r(20),h=r(7180),f=r(4013),m=r(3250),p=r(9376),g=r(4654),v=r(2265);function Z(){let e=(0,p.useRouter)(),[t,r]=(0,i.tN)(),[Z]=(0,a.fl)(),y=(0,s.PQ)(s.YI.primary.getArgb(Z.scheme));(0,s.PQ)(s.YI.onSurface.getArgb(Z.scheme)),(0,s.PQ)(s.YI.onSurfaceVariant.getArgb(Z.scheme));let C=(0,v.useRef)(null),I=(0,v.useRef)(null),P=(0,v.useMemo)(()=>new m.AM({UserPoolId:i.ZP,ClientId:i.xh}),[]);return(0,n.BX)("div",{children:[(0,n.tZ)(o.Z,{}),(0,n.BX)("div",{css:(0,c.iv)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"}),children:[(0,n.tZ)(u.Z,{variant:"h4",css:(0,c.iv)({color:y,fontWeight:"bold"}),children:"ログイン"}),(0,n.BX)("div",{css:(0,c.iv)({marginTop:16,display:"flex",flexDirection:"column"}),children:[(0,n.BX)(l.Z,{variant:"standard",css:(0,c.iv)({marginTop:16}),children:[(0,n.tZ)(d.Z,{children:"電話番号"}),(0,n.tZ)(h.Z,{inputRef:I,placeholder:"09012345678"})]}),(0,n.BX)(l.Z,{variant:"standard",css:(0,c.iv)({marginTop:8}),children:[(0,n.tZ)(d.Z,{children:"パスワード"}),(0,n.tZ)(h.Z,{type:"password",inputRef:C})]}),(0,n.BX)("div",{css:(0,c.iv)({marginTop:32,display:"flex",flexDirection:"row",justifyContent:"flex-end"}),children:[(0,n.tZ)(f.Z,{onClick:()=>{e.push("/signup")},children:"アカウントを新規作成する"}),(0,n.tZ)(f.Z,{variant:"contained",onClick:()=>{var n,o;let i=null===(n=I.current)||void 0===n?void 0:n.value,a=null===(o=C.current)||void 0===o?void 0:o.value;if(!i||!a){(0,g.yv)("電話番号とパスワードを入力してください。",{variant:"error"});return}let c="+81".concat(i.replace(/^0/,"")),s=new m.sD({Username:c,Password:a});new m.ws({Username:c,Pool:P}).authenticateUser(s,{onSuccess:function(n){let o=n.getIdToken().getJwtToken();(0,g.yv)("ログイン成功"),t.apiClient.setNewIdToken(o),r.setStatus("authenticated"),e.push("/user")},onFailure:function(e){(0,g.yv)("ログイン失敗。".concat(e)),console.error(e)}})},children:"ログイン"})]})]})]})]})}},8582:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var n=r(1595),o=r(4856),i=r(1495),a=r(1004),c=r(6387),s=r(3146),u=r(3996),l=r(3448);function d(){let[e]=(0,u.fl)(),t=(0,l.PQ)(l.YI.primary.getArgb(e.scheme));return(0,l.PQ)(l.YI.onSurface.getArgb(e.scheme)),(0,l.PQ)(l.YI.onSurfaceVariant.getArgb(e.scheme)),(0,n.tZ)(i.Z,{position:"fixed",elevation:0,css:(0,s.iv)({backgroundColor:"transparent",color:t}),children:(0,n.BX)(a.Z,{children:[(0,n.tZ)(o.Z,{sx:{mr:1}}),(0,n.tZ)(c.Z,{variant:"h6",css:(0,s.iv)({fontWeight:"bold"}),children:"推しコール"})]})})}},156:function(e,t,r){"use strict";r.d(t,{ZP:function(){return i},st:function(){return f},tN:function(){return l},xh:function(){return a}});var n=r(1595),o=r(2265);let i="ap-northeast-1_QZrerTmNH",a="7ibhthrioi38cqgoh1a9lco365",c="https://w1w476hjrd.execute-api.ap-northeast-1.amazonaws.com/dev",s=(0,o.createContext)({apiClient:h(c,void 0),status:"loading"}),u=(0,o.createContext)(()=>{}),l=()=>{let e=(0,o.useContext)(s),t=(0,o.useContext)(u);return[e,(0,o.useMemo)(()=>({setStatus:e=>{t({type:"setStatus",payload:{status:e}})}}),[])]},d=(e,t)=>"setStatus"===t.type?{...e,status:t.payload.status}:e;function h(e,t){return{apiGatewayUrl:()=>e,idToken:()=>t,setNewIdToken:e=>{localStorage.setItem("idToken",e),t=e,console.log("setNewIdToken",e)},restoreIdToken:async()=>{let r=localStorage.getItem("idToken");if(r)try{if(!(await fetch("".concat(e,"/user"),{method:"GET",headers:{Authorization:"".concat(r)}})).ok)throw Error("Unauthorized");return t=r,r}catch(e){console.error(e);return}}}}function f(e){let{children:t}=e,[r,i]=(0,o.useReducer)(d,{apiClient:h(c,void 0),status:"loading"}),a=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{a.current||(a.current=!0,r.apiClient.restoreIdToken().then(e=>{i({type:"setStatus",payload:{status:e?"authenticated":"unauthenticated"}})}))},[]),(0,n.tZ)(s.Provider,{value:r,children:(0,n.tZ)(u.Provider,{value:i,children:t})})}},3996:function(e,t,r){"use strict";r.d(t,{ThemeStoreProvider:function(){return g},fl:function(){return m}});var n=r(1595),o=r(5106),i=r.n(o),a=r(2017),c=r(9163),s=r(9026),u=r(3448),l=r(2265),d=r(4049);let h=(0,l.createContext)({scheme:new u.S2(u.OP.fromInt(15569803),!1,0),sourceColor:15569803}),f=(0,l.createContext)(()=>{}),m=()=>{let e=(0,l.useContext)(h),t=(0,l.useContext)(f);return[e,{resetSourceColor:()=>{t({type:"setTheme",payload:{scheme:new u.S2(u.OP.fromInt(15569803),!1,0),sourceColor:15569803}})}}]},p=(e,t)=>{if("setTheme"===t.type){let{scheme:r,sourceColor:n}=t.payload;return e.sourceColor===n?e:{...e,scheme:r,sourceColor:n}}return e},g=e=>{let{children:t}=e,[r,o]=(0,l.useReducer)(p,{scheme:new u.S2(u.OP.fromInt(15569803),!1,0),sourceColor:15569803}),m=(0,a.Z)((0,c.Z)({palette:{mode:"light",primary:{main:(0,u.PQ)(u.YI.primary.getArgb(r.scheme))},secondary:{main:(0,u.PQ)(u.YI.secondary.getArgb(r.scheme))},background:{default:(0,u.PQ)(u.YI.surface.getArgb(r.scheme)),paper:(0,u.PQ)(u.YI.surfaceContainer.getArgb(r.scheme))},error:{main:(0,u.PQ)(u.YI.error.getArgb(r.scheme))},text:{primary:(0,u.PQ)(u.YI.onSurface.getArgb(r.scheme))}},typography:{fontFamily:i().style.fontFamily}}));return(0,n.BX)(s.Z,{theme:m,children:[(0,n.tZ)(d.Z,{styles:e=>({body:{transition:e.transitions.create(["background-color","transform"])}})}),(0,n.tZ)(h.Provider,{value:r,children:(0,n.tZ)(f.Provider,{value:o,children:t})})]})}}},function(e){e.O(0,[957,781,220,654,938,250,971,117,744],function(){return e(e.s=7201)}),_N_E=e.O()}]);